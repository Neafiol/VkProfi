# vkprofi

Профоринтационный бот для Vk, работающий на алгоритмах машинного обучения.

#### Бот.

Бот работает на библиотеке vk_api для Python 3.7. Взаимодействие с пользоватедем происходит 
при помощи Calback Api. Информация обо всех новых сообщения отправляется на htpps приложение
на сервере heroku, а затем переадресуется по http на мой Amazon сервер. Обрабатывается с помощью
web-fraemwork Flask. База данный sqllight, там хранится информация о пользователе, его текущем вопросе
и данных ответах. Ниже класс пользователя в БД (библиотека peewee). Основной файл - app.py


```angular2
db = SqliteDatabase('db.sqlite3')

class Subs(Model):
    vk_id=IntegerField()
    name = TextField()
    qnow = IntegerField()
    bals = TextField(null=True)
    result = BooleanField(null=True)

    class Meta:
        database = db
        db_table='Subs'
``` 

#### Ml часть.
Для обучения моделей машинного обучения оспользовались ответы более чем 400 специалистов из IT сферы. Помимо прохождения теста они указывают свою проффесию, бот основан на теории, что выбирая узкое направленние в IT сфере, люди руководствуются своими предпочтениями, основанными на особенностях характера. Я использую мульклассовую линейную регрессию и делаю нормализацию выходных данных. Благодаря этоому профессии выдаются примерно в одинаковом количестве. Определение профессии теперь происходит в 2 этапа - выбор отрасли и специализация (она уже деревьями решений CatBoostClassifier). Так же я распарсили информацию и профессия и ссылки на курсы, которая отправляется после прохождения теста. Что бы решить проблему с медленной скорость я залил все на быстрый амазоновский сервак и сделали асинхронную выгрузку фотографий (ответ ~1с).
Сейчас бот подключен к группе https://vk.com/vkproorintation , в боте 15 профессий. 

Ниже код, который отправляет данные на обучение.
```
from sklearn.multioutput import MultiOutputRegressor
from sklearn.datasets import make_regression
from sklearn.linear_model import *

lasso = LinearRegression()
model = MultiOutputRegressor(lasso)
model.fit(x_train,y_train)
```